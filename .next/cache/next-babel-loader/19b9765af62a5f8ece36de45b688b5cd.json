{"ast":null,"code":"/**\n * Koyok.e pervuma aku ngawe negeiki barang, kampret\n */\nimport axios from 'axios';\nconst isServer = true;\n/**\n * Error handle from rest api\n * @param {AxiosError} error\n * @return {AxiosError}\n */\n\nexport const handleException = error => {\n  let errorMessage = '';\n\n  if (error.response) {\n    const data = error.response.data;\n\n    if (!data) {\n      errorMessage = 'Empty response!';\n    } else if (data.error.message) {\n      errorMessage = data.error.message;\n    } else {\n      errorMessage = 'Invalid error response!';\n    }\n  } else if (error.request) {\n    errorMessage = 'The request was made but no response, try check your connection';\n  } else {\n    errorMessage = error.message;\n  }\n\n  if (errorMessage) {\n    error.message = errorMessage;\n  }\n\n  return error;\n};\n/**\n * Run fetch local api\n *\n * @returns {AxiosInstance}\n */\n\nfunction requestApi() {\n  const params = {\n    baseURL: '/api'\n  };\n  const instance = axios.create(params);\n  instance.interceptors.response.use(response => response, error => {\n    const exceptions = handleException(error);\n\n    if (isServer) {\n      if (exceptions) {\n        delete exceptions.config;\n      }\n    }\n\n    return Promise.reject(exceptions);\n  });\n  return instance;\n}\n\nexport default requestApi;","map":null,"metadata":{},"sourceType":"module"}